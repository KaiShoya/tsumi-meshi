# v0.1.3 — TODO triage (issues/tasks)

This file converts in-code TODO comments into tracked tasks for v0.1.3.

## Tasks

1. app/pages/index.vue — Confirmation dialog
   - File: `app/pages/index.vue`
   - TODO: `// TODO: Show confirmation dialog`
   - Description: When user triggers the action (delete/clear/check?), show a confirmation modal before proceeding.
   - Owner: `@kai` (or `frontend`)
   - Estimate: 1d
   - Acceptance: Modal matches design, keyboard accessible, unit test for invocation, integration test verifies flow.
   - Status: Completed (implemented and tested)

2. app/composables/useAuth.ts — Cloudflare Workers API calls (login/register)
   - File: `app/composables/useAuth.ts`
   - TODOs: "Implement API call to Cloudflare Workers" (multiple locations)
   - Description: Implement actual HTTP calls to Cloudflare Workers endpoints for `login`, `register`, `me` and token refresh as per `.agent/specs/auth.md`.
   - Owner: `@kai` (backend/client integration)
   - Estimate: 1.5d
   - Acceptance: Unit tests for happy/failure paths, type-safe responses, update `.agent/specs/auth.md` if behavior changes.
   - Status: Completed (API integration + tests present)

3. Repositories / Stores — tags/recipes API TODOs
   - Files: `app/repositories/*`, `app/stores/data/*`
   - TODO: missing behaviors for create/update/delete/pagination
   - Description: Audit repository and store implementations for `tags` and `recipes` and implement missing API calls or behaviors.
   - Owner: `@kai` (repositories) and `TBD` (stores)
   - Estimate: 2d
   - Acceptance: Unit tests for repositories and stores, integration tests for API flows.
   - Status: Completed (repositories implemented; stores updated)

4. Misc TODOs — tech debt sweep
   - Files: various (use `grep "TODO"` to find exact lines)
   - Description: Create issues for remaining TODOs with owner and estimate; prioritize into backlog.
   - Owner: `@kai`
   - Estimate: 0.5d

5. app/composables/useLogger.ts — Logging integration
   - File: `app/composables/useLogger.ts`
   - TODO: `// TODO: Implement proper logging (NewRelic integration)`
   - Description: Provide a pluggable logging adapter (console in dev, NewRelic/other in prod) and ensure structured logs are emitted for errors and key flows.
   - Owner: `@kai`
   - Estimate: 0.5d
   - Status: Completed (pluggable adapter implemented)

6. Full TODO scan summary
   - Found TODOs in: `app/composables/useAuth.ts` (multiple), `app/pages/index.vue`, `app/repositories/*`, `app/stores/data/*`, `app/composables/useLogger.ts`, plus various doc TODOs in `.agent/docs`.
   - Next action: Create GitHub Issues only for remaining misc TODOs (see section 4) and link back to this file and to `.agent/docs/tasks/v0.1.3-tasks.md`.

---

## Next steps
- Confirm owners/estimates or adjust to team assignments.
- Create GH issues from above tasks (or track in project board).
- Implement in order: (1) confirmation dialog, (2) auth API integration, (3) repository/store work, (4) tech debt triage.

## Misc TODOs (scan results & suggested actions)

The codebase contains scattered TODOs and doc TODO notes; these are lower-risk tech-debt items to sweep.

A. `app/stores/data/*` — Audit stores for TODOs and missing behaviors
   - Files: `app/stores/data/checks.ts`, `app/stores/data/folders.ts`, `app/stores/data/recipes.ts`, `app/stores/data/tags.ts`
   - Action: Inspect each store for TODOs or missing error handling; add unit tests where needed.
   - Priority: P2
   - Estimate: 1d

B. Documentation TODOs — `.agent/docs/*` and in-repo docs
   - Files: `.agent/docs/*` (QA entries, tasks, specs)
   - Action: Consolidate doc TODOs into `.agent/docs/tasks/v0.1.3-issues.md` (this file) and mark actionable items as Issues or backlog tasks.
   - Priority: P3
   - Estimate: 0.5d

C. Tests TODOs — small test cleanups
   - Files: `tests/*` (see `grep "TODO"` results)
   - Action: Fix or remove transient TODOs in tests (e.g., mocking improvements, cleanup handlers).
   - Priority: P3
   - Estimate: 0.5d

D. Misc: cross-cutting small improvements
   - Examples: add missing TSDoc, tighten `any` usages, improve error messages.
   - Priority: P4
   - Estimate: small (0.25-1d each)

Next action: I will extract exact TODO lines and create a short checklist (file + line + short description) in this file so you can review before we open Issues. Proceed to extract exact TODO lines now? (yes/no)

## Recommended tracking (Issue vs Task)

以下は検出済みの TODO 項目についての推奨トラッキング手段です。`Issue` は GitHub 上で公開・担当付与・議論が必要な項目、`Task` はリポジトリ内の短期作業（ドキュメント更新、小さな修正、テストの改善）として扱うことを推奨します。

- `app/pages/index.vue` — Confirmation dialog
   - 推奨: Issue
   - ラベル: `area:ui`, `priority:P1`
   - 理由: UX 影響が大きく、レビューと a11y 検証が必要なため公開 Issue として追跡するべき。

- `app/composables/useAuth.ts` — Cloudflare Workers API integration (login/register/refresh)
   - 推奨: Issue
   - ラベル: `area:auth`, `priority:P1`, `tests`
   - 理由: 認証はセキュリティ要素を含むため議論・仕様確認・CI での検証が望ましい。

- `app/repositories/*` / `app/stores/data/*` — tags/recipes CRUD & pagination
   - 推奨: Issue (大きな実装) としてトラッキング、かつ細分化タスクを作成
   - ラベル: `area:repos`, `priority:P2`
   - 理由: API 仕様・互換性・テストが必要なため、Issue でスコープ管理し、各小作業は Task に分割。

- `app/composables/useLogger.ts` — Logging adapter (NewRelic 等)
   - 推奨: Task → 小さな PR で対応可
   - ラベル: `area:infra`, `priority:P3`
   - 理由: 環境依存（prod）の設定が絡むが実装自体は小さめ。まず Task で着手して Issue 化は不要。

- CI: `RUN_MINIFLARE` / Miniflare を CI で有効化する案
   - 推奨: Issue
   - ラベル: `area:ci`, `area:testing`, `priority:P2`
   - 理由: CI 変更は権限・コスト・依存を伴うため、Issue で承認と手順を記録すべき。

- Misc TODOs / doc TODOs / small test cleanups
   - 推奨: Task（個別の短時間作業）
   - ラベル: `docs` / `tests` / `area:tech-debt`（必要に応じて）
   - 理由: 小さい修正はタスク管理で素早く対応し、まとまったまとまりが出たら Issue に昇格。

-- 提案ワークフロー
1. P1/P2 相当は Issue として作成（担当・見積・ラベルを付与）。
2. Issue を受けて細分化可能なら `task`（.agent/tasks または project board）に分割して着手。
3. 小さな改善（a11y テストの微修正、TSDoc 追加等）は直接 Task として消化。

## Stage D — Test results (2025-12-15)

- Summary: ローカルで `pnpm test` を実行し、ユニット/統合/a11y テストが全通しました。
- 結果: `Tests 49 passed (49)`（全テスト成功、詳細は `vitest` の出力を参照）。
- 影響: 現時点で追加のテスト修正は不要。Stage D を完了扱いとします。
- 次アクション: Stage F（CI 実行と不具合修正）に移行して、CI 上でも同一結果が得られるか確認してください。

```# v0.1.3 — TODO triage (issues/tasks)

This file converts in-code TODO comments into tracked tasks for v0.1.3.
